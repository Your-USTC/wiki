<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>妮可之记 - 在线帮助</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f4f4f900;
        }

        .center-img {
            display: block;
            margin: 0 auto;
            width: 40%;
            padding-top: 10px;
        }

        .header-bar {
            background-color: #def;
            /* color: white; */
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 10px;
            border-radius: 12px;
        }

        .header-title {
            margin: 0 0 10px 0;
            font-size: 1.8em;
            text-align: center;
        }

        .header-subtitle {
            margin: 0;
            font-weight: normal;
            font-size: 1em;
            opacity: 0.9;
            text-align: center;
        }

        .inline-content {
            color: #333;
            font-size: 14px;
            line-height: 1.4;
            padding: 2px 6px;
            background-color: #f5f7fa;
            border-radius: 4px;
            border: 1px solid #e4e7ed;
        }

        .copy-btn {
            padding: 8px 18px;
            background: rgba(64, 158, 255, 0.1);
            color: #409eff;
            border: 1px solid rgba(64, 158, 255, 0.4);
            backdrop-filter: blur(4px);
            border-radius: 12px;
            font-weight: 600;
            transition: 0.3s;
        }

        .copy-btn:hover {
            background: #409eff;
            color: white;
        }
        
        .accordion-container {
            max-width: 600px;
            margin: 0 auto;
        }

        .accordion-item {
            margin-bottom: 10px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            background-color: #ffffff;
            overflow: hidden; /* 确保内容超出时被裁剪，配合动画效果 */
        }

        .accordion-header {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .accordion-header:hover {
            background-color: #f0f0f0;
        }

        .accordion-title {
            flex-grow: 1;
            font-weight: 600;
            color: #333;
            font-size: 1.1em;
        }

        .arrow-icon {
            width: 20px;
            height: 20px;
            transition: transform 0.3s ease;
            color: #555;
        }

        /* 旋转箭头类 */
        .rotated .arrow-icon {
            transform: rotate(90deg);
        }

        .accordion-content {
            /* 初始高度设置为0，动画过渡应用于高度 */
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out, padding 0.4s ease-out;
            background-color: #fafafa;
        }

        .accordion-body {
            padding: 0 20px; /* 初始无内容垂直间距 */
            color: #555;
            line-height: 1.6;
        }

        .accordion-body p {
            margin: 15px 0; /* 内容文本的间距 */
        }

        /* 展开状态下的样式 */
        .expanded .accordion-content {
            /* 展开后的高度需要足够大以容纳内容，或者使用一个预估值 */
            /* 这里的 trick 是设置为一个较大的值，然后依赖JS设置最终高度 */
            max-height: 500px; /* 预设一个较大的值，确保内容能显示 */
            padding: 10px 0; /* 展开后添加一些垂直间距 */
        }
        /* --- 深色模式 (Dark Mode) 样式 --- */
        @media (prefers-color-scheme: dark) {
            body {
                background-color: #1e1e1e; /* 深色背景 */
                color: #e0e0e0; /* 浅色文本 */
            }

            .header-bar {
                background-color: #456;
            }
            
            .header-title {
                color: #f0f0f0;
            }

            .header-subtitle {
                color: #f0f0f0;
            }

            .inline-content {
                color: #f8f9fa;
                background-color: #2d3748;
                border: 1px solid #4a5568;
            }

            .accordion-item {
                background-color: #2d2d2d; /* 深色卡片背景 */
                box-shadow: 0 2px 8px rgba(255, 255, 255, 0.1); /* 浅色阴影 */
            }

            .accordion-header:hover {
                background-color: #3a3a3a;
            }

            .accordion-title {
                color: #f0f0f0; /* 浅色标题 */
            }

            .arrow-icon {
                color: #cccccc; /* 浅色箭头 */
            }

            .accordion-content {
                background-color: #252525; /* 内容区域深色背景 */
            }

            .accordion-body {
                color: #b0b0b0; /* 较深的浅色文本 */
            }

            .accordion-body p {
                color: #b0b0b0;
            }
        }
    </style>
</head>
<body>

<div class="header-bar">
    <h1 class="header-title">妮可之记 - 在线帮助</h1>
    <p class="header-subtitle">此在线帮助是对应用内帮助内容的补充。如果你还存在疑惑，欢迎联系我们以更新下面的内容qwq</p>
</div>

<div class="accordion-container">
    <div class="accordion-item">
        <div class="accordion-header">
            <span class="accordion-title">如果你是中国科学技术大学的学生</span>
            <svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
        </div>
        <div class="accordion-content">
            <div class="accordion-body">
                <p>
                    由于审核要求，我们不能将应用内链接直接设置为USTC各个网站的链接。你可以
                    <button class="copy-btn" onclick="copyToClipboard()">点击此按钮</button>，把
                    <code id="copyText" class="inline-content">The world open itself before those with noble hearts</code>
                    复制到剪贴板，再前往应用内粘贴（粘贴方法见此帮助的第三条），无需手动输入USTC链接即可使用。
                </p>
                <p>导入成功后，将显示如下提示</p>
                <img src="./res/custom_func_success.webp" width="100%">
            </div>
        </div>
    </div>

    <div class="accordion-item">
        <div class="accordion-header">
            <span class="accordion-title">自定义链接的导入内容应该是什么格式？</span>
            <svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
        </div>
        <div class="accordion-content">
            <div class="accordion-body">
                <code>[{"num": "这里是编号（例如，第1组第1个链接是0.0）", "url": "这里是网址", "title": "这里是标题"}, ...（重复，格式同前面的花括号内部分）]</code>
            </div>
        </div>
    </div>

    <div class="accordion-item">
        <div class="accordion-header">
            <span class="accordion-title">在哪里可以导入自定义链接？</span>
            <svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
        </div>
        <div class="accordion-content">
            <div class="accordion-body">
                <p>（先将要导入的链接复制到剪贴板）有以下两种方式：</p>
                <li>功能页点击任意一个链接。</li>
                <li>设置页的“自定义「功能」页跳转链接”选项。</li>
                <p>任选一种方式，打开后会跳出如下弹窗</p>
                <img src="./res/custom_func_dialog.webp" width="100%">
                <p>点击「从剪贴板导入」左边的蓝色按钮，即可导入自定义链接。</p>
            </div>
        </div>
    </div>

    <!--
    <div class="accordion-item">
        <div class="accordion-header">
            <span class="accordion-title">第三部分：JavaScript 交互逻辑</span>
            <svg class="arrow-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
        </div>
        <div class="accordion-content">
            <div class="accordion-body">
                <p>JavaScript 负责监听点击事件，并在展开和收起时切换 <code>.rotated</code> 和 <code>.expanded</code> 类。展开时，为了实现平滑的高度过渡，我们使用了一个较大的 <code>max-height</code> 值，并在 JS 中动态计算了内容的实际高度并赋给 <code>max-height</code>（如果内容高度已知，这能避免预设值过大或过小的问题，但为了简洁，这里主要依赖 CSS 预设）。</p>
                <p><strong>注意：</strong> 在本示例中，为了简化 JS 代码并保持其单文件特性，我们主要依赖 CSS 的 <code>max-height</code> 过渡来实现“逐渐变长”的效果，内容间距的调整则通过切换 <code>padding</code> 实现。</p>
            </div>
        </div>
    </div>-->

    <img src="./res/think.webp" class="center-img">

</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const items = document.querySelectorAll('.accordion-item');

        items.forEach(item => {
            const header = item.querySelector('.accordion-header');
            const content = item.querySelector('.accordion-content');

            header.addEventListener('click', () => {
                // 切换 'expanded' 类，触发高度和内边距的过渡动画
                const isExpanded = item.classList.toggle('expanded');

                // 切换 'rotated' 类，触发箭头旋转动画
                item.classList.toggle('rotated', isExpanded);

                if (isExpanded) {
                    // 展开时，计算内容实际高度，设置 max-height 以确保平滑过渡
                    // 这一步是实现完美高度过渡的关键
                    content.style.maxHeight = content.scrollHeight + "px";
                } else {
                    // 收起时，将 max-height 设为 0，触发收起动画
                    content.style.maxHeight = "0";
                }
            });

            // 初始设置：确保在初始渲染时内容是收起状态，并设置 max-height 为 0
            // 否则在某些浏览器中，立即添加.expanded可能会跳过初始过渡
            if (!item.classList.contains('expanded')) {
                content.style.maxHeight = "0";
            }
        });
    });

    async function copyToClipboard() {
        try {
            const text = document.getElementById('copyText').textContent;
            // 写入剪贴板（异步操作）
            await navigator.clipboard.writeText(text);
            
            // Theme configuration
            const isDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
            const tip = document.createElement('div');
            const theme = {
                bg: isDarkMode ? '#1f2937' : '#ffffff',
                text: isDarkMode ? '#f9fafb' : '#111827',
                border: isDarkMode ? '#374151' : '#e5e7eb',
                shadow: isDarkMode 
                    ? '0 10px 15px -3px rgba(0, 0, 0, 0.4)' 
                    : '0 10px 15px -3px rgba(0, 0, 0, 0.1)'
            };
            const styles = {
                position: 'fixed',
                top: '5%',
                left: '50%',
                transform: 'translateX(-50%)',
                padding: '12px 16px',
                background: theme.bg,
                color: theme.text,
                border: `1px solid ${theme.border}`,
                borderRadius: '10px',
                boxShadow: theme.shadow,
                zIndex: '9999',
                fontWeight: '500',
                fontSize: '18px',
                fontFamily: '-apple-system, system-ui, sans-serif',
                display: 'flex',
                alignItems: 'center',
                gap: '10px',
                opacity: '0',
                transition: 'all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275)' // Bouncy entry
            };

            Object.assign(tip.style, styles);

            // Use a green accent for the success icon
            tip.innerHTML = `
                <svg width="24" height="24" viewBox="0 0 20 20" fill="currentColor" style="color: #10b981;">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                </svg>
                <span>已复制到剪贴板</span>
            `;

            document.body.appendChild(tip);

            // Animate in
            requestAnimationFrame(() => {
                tip.style.opacity = '1';
                tip.style.top = '10%';
            });

            // Animate out and remove
            setTimeout(() => {
                tip.style.opacity = '0';
                tip.style.top = '10%';
                setTimeout(() => tip.remove(), 400);
            }, 2500);
        } catch (err) {
            console.error('复制失败：', err);
            alert('复制失败，请手动复制！');
        }
    }
</script>

</body>
</html>